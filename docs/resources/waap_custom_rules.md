---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "gcore_waap_custom_rules Resource - terraform-provider-gcore"
subcategory: ""
description: |-
  
---

# gcore_waap_custom_rules (Resource)

Represent Custom Rules for a specific WAAP domain

## Example Usage

```terraform
    provider gcore {
        permanent_api_token = "768660$.............a43f91f"
    }

    resource "gcore_cdn_resource" "cdn_resource" {
        cname  = "api.example.com"
        origin = "origin.example.com"
        options {
            waap { value = true }
        }
    }

    resource "gcore_waap_domain" "domain" {
        name   = gcore_cdn_resource.cdn_resource.cname
        status = "monitor"
    }

    resource "gcore_waap_custom_rule" "custom_rule" {
        domain_id = gcore_waap_domain.domain.id
        name = "Custom Rule"
        enabled = true
        action {
            block {
                status_code = 403
                action_duration = "5m"
            }
        }
        conditions {
            ip {
                negation    = false
                ip_address = "192.168.0.6"
            }
            http_method {
                negation     = false
                http_method  = "POST"
            }
        }
    }
```



<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `action` (Block List, Min: 1, Max: 1) (see [below for nested schema](#nestedblock--action))
- `domain_id` (String)
- `enabled` (Boolean) Whether the rule is enabled.
- `name` (String) Name of the rule.

### Optional

- `conditions` (Block List) (see [below for nested schema](#nestedblock--conditions))
- `description` (String) Optional description of the rule.

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--action"></a>
### Nested Schema for `action`

Optional:

- `allow` (Block List) (see [below for nested schema](#nestedblock--action--allow))
- `block` (Block List, Max: 1) (see [below for nested schema](#nestedblock--action--block))
- `captcha` (Block List) (see [below for nested schema](#nestedblock--action--captcha))
- `handshake` (Block List) (see [below for nested schema](#nestedblock--action--handshake))
- `monitor` (Block List) (see [below for nested schema](#nestedblock--action--monitor))
- `tag` (Block List) (see [below for nested schema](#nestedblock--action--tag))

<a id="nestedblock--action--allow"></a>
### Nested Schema for `action.allow`


<a id="nestedblock--action--block"></a>
### Nested Schema for `action.block`

Optional:

- `action_duration` (String)
- `status_code` (Number)


<a id="nestedblock--action--captcha"></a>
### Nested Schema for `action.captcha`


<a id="nestedblock--action--handshake"></a>
### Nested Schema for `action.handshake`


<a id="nestedblock--action--monitor"></a>
### Nested Schema for `action.monitor`


<a id="nestedblock--action--tag"></a>
### Nested Schema for `action.tag`

Required:

- `tags` (List of String)



<a id="nestedblock--conditions"></a>
### Nested Schema for `conditions`

Optional:

- `content_type` (Block List) (see [below for nested schema](#nestedblock--conditions--content_type))
- `country` (Block List) (see [below for nested schema](#nestedblock--conditions--country))
- `file_extension` (Block List) (see [below for nested schema](#nestedblock--conditions--file_extension))
- `header` (Block List) (see [below for nested schema](#nestedblock--conditions--header))
- `header_exists` (Block List) (see [below for nested schema](#nestedblock--conditions--header_exists))
- `http_method` (Block List) (see [below for nested schema](#nestedblock--conditions--http_method))
- `ip` (Block List) (see [below for nested schema](#nestedblock--conditions--ip))
- `ip_range` (Block List) (see [below for nested schema](#nestedblock--conditions--ip_range))
- `organization` (Block List) (see [below for nested schema](#nestedblock--conditions--organization))
- `owner_types` (Block List) (see [below for nested schema](#nestedblock--conditions--owner_types))
- `request_rate` (Block List, Max: 1) (see [below for nested schema](#nestedblock--conditions--request_rate))
- `response_header` (Block List) (see [below for nested schema](#nestedblock--conditions--response_header))
- `response_header_exists` (Block List) (see [below for nested schema](#nestedblock--conditions--response_header_exists))
- `session_request_count` (Block List) (see [below for nested schema](#nestedblock--conditions--session_request_count))
- `tags` (Block List) (see [below for nested schema](#nestedblock--conditions--tags))
- `url` (Block List) (see [below for nested schema](#nestedblock--conditions--url))
- `url_agent` (Block List) (see [below for nested schema](#nestedblock--conditions--url_agent))
- `user_defined_tags` (Block List) (see [below for nested schema](#nestedblock--conditions--user_defined_tags))

<a id="nestedblock--conditions--content_type"></a>
### Nested Schema for `conditions.content_type`

Required:

- `content_type` (List of String) The list of content types to match against

Optional:

- `negation` (Boolean) Whether or not to apply a boolean NOT operation to the rule's condition


<a id="nestedblock--conditions--country"></a>
### Nested Schema for `conditions.country`

Required:

- `country` (List of String) A list of ISO 3166-1 alpha-2 formatted strings representing the countries to match against

Optional:

- `negation` (Boolean) Whether or not to apply a boolean NOT operation to the rule's condition


<a id="nestedblock--conditions--file_extension"></a>
### Nested Schema for `conditions.file_extension`

Required:

- `file_extension` (List of String) The list of file extensions to match against

Optional:

- `negation` (Boolean) Whether or not to apply a boolean NOT operation to the rule's condition


<a id="nestedblock--conditions--header"></a>
### Nested Schema for `conditions.header`

Required:

- `header` (String) The request header name
- `match_type` (String) The type of matching condition
- `value` (String) The request header value

Optional:

- `negation` (Boolean) Whether or not to apply a boolean NOT operation to the rule's condition


<a id="nestedblock--conditions--header_exists"></a>
### Nested Schema for `conditions.header_exists`

Required:

- `header` (String) The request header name

Optional:

- `negation` (Boolean) Whether or not to apply a boolean NOT operation to the rule's condition


<a id="nestedblock--conditions--http_method"></a>
### Nested Schema for `conditions.http_method`

Required:

- `http_method` (String) HTTP methods of a request

Optional:

- `negation` (Boolean) Whether or not to apply a boolean NOT operation to the rule's condition


<a id="nestedblock--conditions--ip"></a>
### Nested Schema for `conditions.ip`

Required:

- `ip_address` (String) A single IPv4 or IPv6 address

Optional:

- `negation` (Boolean) Whether or not to apply a boolean NOT operation to the rule's condition


<a id="nestedblock--conditions--ip_range"></a>
### Nested Schema for `conditions.ip_range`

Required:

- `lower_bound` (String) The lower bound IPv4 or IPv6 address to match against
- `upper_bound` (String) The upper bound IPv4 or IPv6 address to match against

Optional:

- `negation` (Boolean) Whether or not to apply a boolean NOT operation to the rule's condition


<a id="nestedblock--conditions--organization"></a>
### Nested Schema for `conditions.organization`

Required:

- `organization` (String) The organization to match against

Optional:

- `negation` (Boolean) Whether or not to apply a boolean NOT operation to the rule's condition


<a id="nestedblock--conditions--owner_types"></a>
### Nested Schema for `conditions.owner_types`

Required:

- `owner_types` (List of String) Match the type of organization that owns the IP address making an incoming request

Optional:

- `negation` (Boolean) Whether or not to apply a boolean NOT operation to the rule's condition


<a id="nestedblock--conditions--request_rate"></a>
### Nested Schema for `conditions.request_rate`

Required:

- `http_methods` (List of String) Possible HTTP request methods that can trigger a request rate condition
- `ips` (List of String) A list of source IPs that can trigger a request rate condition
- `path_pattern` (String) A regular expression matching the URL path of the incoming request
- `requests` (Number) The number of incoming requests over the given time that can trigger a request rate condition
- `time` (Number) The number of seconds that the WAAP measures incoming requests over before triggering a request rate condition
- `user_defined_tag` (String) A user-defined tag that can be included in incoming requests and used to trigger a request rate condition

Optional:

- `negation` (Boolean) Whether or not to apply a boolean NOT operation to the rule's condition


<a id="nestedblock--conditions--response_header"></a>
### Nested Schema for `conditions.response_header`

Required:

- `header` (String) The request header name
- `match_type` (String) The type of matching condition
- `value` (String) The request header value

Optional:

- `negation` (Boolean) Whether or not to apply a boolean NOT operation to the rule's condition


<a id="nestedblock--conditions--response_header_exists"></a>
### Nested Schema for `conditions.response_header_exists`

Required:

- `header` (String) The request header name

Optional:

- `negation` (Boolean) Whether or not to apply a boolean NOT operation to the rule's condition


<a id="nestedblock--conditions--session_request_count"></a>
### Nested Schema for `conditions.session_request_count`

Required:

- `request_count` (Number) The number of dynamic requests in the session

Optional:

- `negation` (Boolean)


<a id="nestedblock--conditions--tags"></a>
### Nested Schema for `conditions.tags`

Required:

- `tags` (List of String) A list of tags to match against the request tags

Optional:

- `negation` (Boolean) Whether or not to apply a boolean NOT operation to the rule's condition


<a id="nestedblock--conditions--url"></a>
### Nested Schema for `conditions.url`

Required:

- `match_type` (String) The type of matching condition
- `url` (String) The URL to match

Optional:

- `negation` (Boolean) Whether or not to apply a boolean NOT operation to the rule's condition


<a id="nestedblock--conditions--url_agent"></a>
### Nested Schema for `conditions.url_agent`

Required:

- `match_type` (String) The type of matching condition
- `url_agent` (String) The user agent value to match

Optional:

- `negation` (Boolean) Whether or not to apply a boolean NOT operation to the rule's condition


<a id="nestedblock--conditions--user_defined_tags"></a>
### Nested Schema for `conditions.user_defined_tags`

Required:

- `tags` (List of String) A list of tags to match against the request tags

Optional:

- `negation` (Boolean) Whether or not to apply a boolean NOT operation to the rule's condition
