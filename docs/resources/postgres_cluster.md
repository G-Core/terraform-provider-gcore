---
page_title: "gcore_postgres_cluster Resource - terraform-provider-gcore"
subcategory: ""
description: |-
  Represents a PostgreSQL cluster resource in Gcore Cloud.
---

# gcore_postgres_cluster (Resource)

Represents a PostgreSQL cluster resource in Gcore Cloud.

## Example Usage

### Basic PostgreSQL Cluster Example

```terraform
# Basic PostgreSQL cluster example
resource "gcore_postgres_cluster" "basic_cluster" {
  name       = "basic-pg-cluster"
  project_id = data.gcore_project.project.id
  region_id  = data.gcore_region.region.id

  flavor {
    cpu    = 1
    memory = 2
  }

  database {
    name  = "mydb"
    owner = "pg"
  }

  network {
    acl = [
      "0.0.0.0/0" # Allow access from anywhere (adjust for production)
    ]
    network_type = "public"
  }

  pg_config {
    version = "15"
  }

  storage {
    size = 20
    type = "ssd-hiiops"
  }

  user {
    name = "pg"
    role_attributes = [
      "LOGIN",
      "CREATEDB",
      "CREATEROLE",
    ]
  }
}
```

### PostgreSQL Cluster with High Availability Example

```terraform
# PostgreSQL cluster with high availability
resource "gcore_postgres_cluster" "ha_cluster" {
  name       = "ha-pg-cluster"
  project_id = data.gcore_project.project.id
  region_id  = data.gcore_region.region.id

  flavor {
    cpu    = 4
    memory = 8
  }

  database {
    name  = "proddb"
    owner = "produser"
  }

  database {
    name  = "stgdb"
    owner = "stguser"
  }

  network {
    acl = [
      "192.168.1.0/24", # Office network
      "10.0.0.0/8"      # Private network
    ]
    network_type = "public"
  }

  pg_config {
    version     = "15"
    pg_conf     = <<-EOT
      max_connections=300
      shared_buffers=2GB
      effective_cache_size=4GB
      maintenance_work_mem=256MB
      work_mem=8MB
      checkpoint_completion_target=0.9
      wal_buffers=32MB
      min_wal_size=4GB
      max_wal_size=16GB
      random_page_cost=1.1
      effective_io_concurrency=200
      log_statement=all
      log_min_duration_statement=1000
    EOT
    pooler_mode = "transaction"
    pooler_type = "pgbouncer"
  }

  storage {
    size = 100
    type = "ssd-hiiops"
  }

  user {
    name = "produser"
    role_attributes = [
      "LOGIN",
      "CREATEDB"
    ]
  }

  user {
    name = "stguser"
    role_attributes = [
      "LOGIN",
      "CREATEDB"
    ]
  }

  user {
    name = "pg"
    role_attributes = [
      "LOGIN",
      "CREATEDB",
      "CREATEROLE",
    ]
  }

  # Enable synchronous replication for high availability
  ha_replication_mode = "sync"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `database` (Block Set, Min: 1) List of databases to create in the cluster. (see [below for nested schema](#nestedblock--database))
- `flavor` (Block List, Min: 1, Max: 1) Flavor of the cluster instance. (see [below for nested schema](#nestedblock--flavor))
- `name` (String) Cluster name.
- `network` (Block List, Min: 1, Max: 1) Network configuration. (see [below for nested schema](#nestedblock--network))
- `pg_config` (Block List, Min: 1, Max: 1) PostgreSQL cluster configuration. (see [below for nested schema](#nestedblock--pg_config))
- `storage` (Block List, Min: 1, Max: 1) Storage configuration. (see [below for nested schema](#nestedblock--storage))
- `user` (Block Set, Min: 1) List of users to create in the cluster. (see [below for nested schema](#nestedblock--user))

### Optional

- `ha_replication_mode` (String) Replication mode. Possible values are `async` and `sync`.
- `project_id` (Number)
- `project_name` (String)
- `region_id` (Number)
- `region_name` (String)
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `created_at` (String) Cluster creation date.
- `id` (String) The ID of this resource.
- `status` (String) Current status of the cluster.

<a id="nestedblock--database"></a>
### Nested Schema for `database`

Required:

- `name` (String) Database name.
- `owner` (String) Owner of the database. Must be one of the users defined in the `users` block.

Read-Only:

- `size` (Number) Size of the database in MiB.


<a id="nestedblock--flavor"></a>
### Nested Schema for `flavor`

Required:

- `cpu` (Number) Number of CPU cores.
- `memory` (Number) Amount of RAM in GiB.


<a id="nestedblock--network"></a>
### Nested Schema for `network`

Required:

- `acl` (Set of String) List of IP addresses or CIDR blocks allowed to access the cluster.

Optional:

- `network_type` (String) Network type. Currently, only `public` is supported.

Read-Only:

- `connection_string` (String) Connection string for the cluster.
- `host` (String) Host address for the cluster.


<a id="nestedblock--pg_config"></a>
### Nested Schema for `pg_config`

Required:

- `version` (String) PostgreSQL version. Possible values are `13`, `14`, and `15`.

Optional:

- `pg_conf` (String) PostgreSQL configuration in `key=value` format, one per line.
- `pooler_mode` (String) Connection pooler mode. Possible values are `session`, `transaction`, and `statement`. If not set, connection pooler is not enabled.
- `pooler_type` (String) Connection pooler type. Currently, only `pgbouncer` is supported.


<a id="nestedblock--storage"></a>
### Nested Schema for `storage`

Required:

- `size` (Number) Storage size in GiB. Must be between 1 and 100.
- `type` (String) Storage type.


<a id="nestedblock--user"></a>
### Nested Schema for `user`

Required:

- `name` (String) User name.
- `role_attributes` (Set of String) List of role attributes. Possible values are: BYPASSRLS, CREATEROLE, CREATEDB, INHERIT, LOGIN, NOLOGIN.

Read-Only:

- `is_secret_revealed` (Boolean) Whether the password for the default `postgres` user is revealed.


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `update` (String)





## Import

Import is supported using the following syntax:

```shell
# import using <project_id>:<region_id>:<cluster_name> format
terraform import gcore_postgres_cluster.postgres_cluster 1:76:my-postgres-cluster
```
