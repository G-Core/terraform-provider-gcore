---
page_title: "gcore_ai_cluster Resource - terraform-provider-gcore"
subcategory: ""
description: |-
  Represent GPU cluster
---

# gcore_ai_cluster (Resource)

Represent GPU cluster

## Example Usage

##### Prerequisite

```terraform
provider gcore {
  permanent_api_token = "251$d3361.............1b35f26d8"
}

data "gcore_project" "project" {
  name = "Default"
}

data "gcore_region" "region" {
  name = "Luxembourg-2"
}

resource "gcore_network" "network" {
  name       = "my-network"
  type       = "vlan"
  project_id = data.gcore_project.project.id
  region_id  = data.gcore_region.region.id
}

resource "gcore_subnet" "subnet" {
  name            = "my-subnet"
  cidr            = "192.168.10.0/24"
  network_id      = gcore_network.network.id

  project_id = data.gcore_project.project.id
  region_id  = data.gcore_region.region.id
}

resource "gcore_keypair" "keypair" {
  project_id  = data.gcore_project.project.id
  sshkey_name = "my-keypair"
  public_key  = "ssh-ed25519 ...your public key... gcore@gcore.com"
}
```

### Basic example

#### Creating GPU cluster of one node with one public interface and metadata provided

```terraform
resource "gcore_ai_cluster" "gpu_cluster" {
  flavor = "bm3-ai-1xlarge-h100-80-8"
  image_id = "37c4fa17-1f18-4904-95f2-dbf39d0318fe"
  cluster_name = "my-gpu-cluster"
  keypair_name = "my-keypair"
  instances_count = 1

  interface {
    type = "external"
  }

  cluster_metadata = {
    my-metadata-key = "my-metadata-value"
  }

  project_id = data.gcore_project.project.id
  region_id  = data.gcore_region.region.id
}
```

#### Creating GPU cluster with two interfaces

This example demonstrates how to create a baremetal GPU cluster with two network interfaces: one public and one private.

```terraform
resource "gcore_ai_cluster" "gpu_cluster" {
  flavor = "bm3-ai-1xlarge-h100-80-8"
  image_id = "37c4fa17-1f18-4904-95f2-dbf39d0318fe"
  cluster_name = "my-gpu-cluster"
  keypair_name = "my-keypair"
  instances_count = 1

  interface {
    type = "external"
  }

  interface {
    type = "subnet"

    network_id = gcore_network.network.id
    subnet_id = gcore_subnet.subnet.id
  }

  project_id = data.gcore_project.project.id
  region_id  = data.gcore_region.region.id
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cluster_name` (String) GPU Cluster Name
- `flavor` (String) Flavor ID (name)
- `image_id` (String) Image ID
- `interface` (Block List, Min: 1) Networks managed by user and associated with the cluster (see [below for nested schema](#nestedblock--interface))

### Optional

- `cluster_metadata` (Map of String) A map of metadata items. Key-value pairs for GPU cluster metadata. Example: {'environment': 'production', 'owner': 'user'}
- `cluster_status` (String) GPU Cluster status
- `instances_count` (Number) Number of servers in the GPU cluster
- `keypair_name` (String) The name of the SSH keypair to use for the GPU servers
- `password` (String) A password for servers in GPU cluster. This parameter is used to set a password for the Admin user on a Windows instance, a default user or a new user on a Linux instance
- `project_id` (Number) Project ID, only one of project_id or project_name should be set
- `project_name` (String) Project name, only one of project_id or project_name should be set
- `region_id` (Number) Region ID, only one of region_id or region_name should be set
- `region_name` (String) Region name, only one of region_id or region_name should be set
- `security_group` (Block Set) Security groups attached to the cluster (see [below for nested schema](#nestedblock--security_group))
- `user_data` (String) User data string in base64 format. This is passed to the instance at launch. For Linux instances, 'user_data' is ignored when 'password' field is provided. For Windows instances, Admin user password is set by 'password' field and cannot be updated via 'user_data'
- `username` (String) A name of a new user in the Linux instance. It may be passed with a 'password' parameter
- `volume` (Block Set) List of volumes attached to the cluster (see [below for nested schema](#nestedblock--volume))

### Read-Only

- `created_at` (String) Datetime when the GPU cluster was created
- `creator_task_id` (String) Task that created this entity
- `id` (String) The ID of this resource.
- `image_name` (String) Image name
- `poplar_servers` (List of Object) GPU cluster servers list (see [below for nested schema](#nestedatt--poplar_servers))
- `task_id` (String) Task ID associated with the cluster
- `task_status` (String) Task status

<a id="nestedblock--interface"></a>
### Nested Schema for `interface`

Optional:

- `network_id` (String) Network ID
- `port_id` (String) Network ID the subnet belongs to. Port will be plugged in this network
- `subnet_id` (String) Port is assigned to IP address from the subnet
- `type` (String) Network type


<a id="nestedblock--security_group"></a>
### Nested Schema for `security_group`

Optional:

- `id` (String) Security group ID


<a id="nestedblock--volume"></a>
### Nested Schema for `volume`

Required:

- `image_id` (String) Volume ID. Mandatory if volume is pre-existing volume

Optional:

- `name` (String) Volume name
- `size` (Number) Volume size, GiB
- `source` (String) Currently available only value
- `volume_id` (String) Volume ID
- `volume_type` (String) Volume type

Read-Only:

- `attachments` (Block Set) Attachment list (see [below for nested schema](#nestedblock--volume--attachments))
- `created_at` (String) Datetime when the volume was created
- `creator_task_id` (String) Task that created this entity
- `status` (String) Volume status
- `updated_at` (String) Datetime when the volume was last updated
- `volume_image_metadata` (Map of String) Image information for volumes that were created from image

<a id="nestedblock--volume--attachments"></a>
### Nested Schema for `volume.attachments`

Read-Only:

- `attached_at` (String) Attachment creation datetime
- `attachment_id` (String) ID of attachment object
- `device` (String) Block device name in guest
- `instance_name` (String) Instance name (if attached and server name is known)
- `server_id` (String) Instance ID
- `volume_id` (String) Volume ID



<a id="nestedatt--poplar_servers"></a>
### Nested Schema for `poplar_servers`

Read-Only:

- `addresses` (Set of Object) (see [below for nested schema](#nestedobjatt--poplar_servers--addresses))
- `creator_task_id` (String)
- `flavor` (Map of String)
- `flavor_id` (String)
- `instance_created` (String)
- `instance_description` (String)
- `instance_id` (String)
- `instance_name` (String)
- `metadata` (Map of String)
- `security_groups` (Set of Object) (see [below for nested schema](#nestedobjatt--poplar_servers--security_groups))
- `status` (String)
- `task_id` (String)
- `task_state` (String)
- `vm_state` (String)
- `volumes` (Set of Object) (see [below for nested schema](#nestedobjatt--poplar_servers--volumes))

<a id="nestedobjatt--poplar_servers--addresses"></a>
### Nested Schema for `poplar_servers.addresses`

Read-Only:

- `address` (List of Object) (see [below for nested schema](#nestedobjatt--poplar_servers--addresses--address))
- `network_name` (String)

<a id="nestedobjatt--poplar_servers--addresses--address"></a>
### Nested Schema for `poplar_servers.addresses.address`

Read-Only:

- `addr` (String)
- `type` (String)



<a id="nestedobjatt--poplar_servers--security_groups"></a>
### Nested Schema for `poplar_servers.security_groups`

Read-Only:

- `name` (String)


<a id="nestedobjatt--poplar_servers--volumes"></a>
### Nested Schema for `poplar_servers.volumes`

Read-Only:

- `delete_on_termination` (Boolean)
- `id` (String)






## Import

Import is supported using the following syntax:

```shell
# import using <project_id>:<region_id>:<cluster_id> format
terraform import gcore_ai_cluster.cluster1 1:6:447d2959-8ae0-4ca0-8d47-9f050a3637d7
```

